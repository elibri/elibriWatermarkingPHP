<!-- HTML header for doxygen 1.8.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <!-- For Mobile Devices -->
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
        <meta name="generator" content="Doxygen 1.9.1"/>
        <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
        <title>Moduł &nbsp; PHP &nbsp; dla &nbsp; API &nbsp; Watermarkingu &nbsp; elibri: Dokumentacja klasy ElibriWatermarkingClient</title>
        <!--<link href="tabs.css" rel="stylesheet" type="text/css"/>-->
        <script type="text/javascript" src="dynsections.js"></script>
        <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
        <link href="stylesheet.css" rel="stylesheet" type="text/css" />
        <link href='https://fonts.googleapis.com/css?family=Roboto+Slab' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
        <script type="text/javascript" src="doxy-boot.js"></script>
    </head>
    <body>
        <nav class="navbar navbar-default" role="navigation">
            <div class="container">
                <div class="navbar-header">
                    <a class="navbar-brand">Moduł &nbsp; PHP &nbsp; dla &nbsp; API &nbsp; Watermarkingu &nbsp; elibri </a>
                </div>
                <ul class="nav navbar-nav">
                    <li><a href="index.html">Strona główna</a></li>
                    <li><a href="modules.html">Moduły</a></li>
                    <li><a href="annotated.html">Klasy</a></li>
                    <li><a href="tests.html">Testy modułowe</a></li>
                  </ul>
            </div>
        </nav>
        <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
            <div class="content" id="content">
                <div class="container">
                    <div class="row">
                        <div class="col-sm-12 panel " style="padding-bottom: 15px;">
                            <div style="margin-bottom: 15px;">
<!-- end header part -->
<!-- Wygenerowano przez Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Szukaj','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Szukaj');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="classElibriWatermarkingClient-members.html">Lista wszystkich składowych</a> &#124;
<a href="#pub-methods">Metody publiczne</a>  </div>
  <div class="headertitle">
<div class="title">Dokumentacja klasy ElibriWatermarkingClient</div>  </div>
</div><!--header-->
<div class="contents">

<p>ElibriAPI abstrahuje wykorzystanie API udostępniane przez eLibri.  
 <a href="classElibriWatermarkingClient.html#details">Więcej...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Metody publiczne</h2></td></tr>
<tr class="memitem:a8211ba714534e66679af4541b8c80ce3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classElibriWatermarkingClient.html#a8211ba714534e66679af4541b8c80ce3">__construct</a> ($token, $secret, $host=&quot;https://www.elibri.com.pl&quot;)</td></tr>
<tr class="memdesc:a8211ba714534e66679af4541b8c80ce3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Kontruktor obiektu API.  <a href="classElibriWatermarkingClient.html#a8211ba714534e66679af4541b8c80ce3">Więcej...</a><br /></td></tr>
<tr class="separator:a8211ba714534e66679af4541b8c80ce3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c799c9eb35b2e42598d01d46e06c638"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classElibriWatermarkingClient.html#a0c799c9eb35b2e42598d01d46e06c638">watermark</a> ($ident, $formats, $visible_watermark, $client_symbol=NULL)</td></tr>
<tr class="memdesc:a0c799c9eb35b2e42598d01d46e06c638"><td class="mdescLeft">&#160;</td><td class="mdescRight">Zlecaj watermarkowanie. Żeby skrócić maksymalnie oczekiwanie klienta na plik, podzieliliśmy cały proces watermarkingu na dwa etapy. Proponujemy, żeby zlecać watermarking tak wcześnie, jak to tylko możliwe (na przykład wtedy, gdy klient opuści koszyk, i poda swoje dane) elibri rozpoczyna wtedy watermarkowanie książki, ale nie udostępnia jeszcze pliku sklepowi, ani nie rejestruje transakcji. Dopiero po dokonaniu płatności przez klienta należy wywołać metodę deliver, która to asynchronicznie dostarczy linki do plik do sklepu.  <a href="classElibriWatermarkingClient.html#a0c799c9eb35b2e42598d01d46e06c638">Więcej...</a><br /></td></tr>
<tr class="separator:a0c799c9eb35b2e42598d01d46e06c638"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71b2829ff44480bf0bcb368832cd903c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classElibriWatermarkingClient.html#a71b2829ff44480bf0bcb368832cd903c">deliver</a> ($trans_id)</td></tr>
<tr class="memdesc:a71b2829ff44480bf0bcb368832cd903c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dostarcz plik oraz zajestruj transakcję Ta metoda powinna zostać wywołana po watermark. Sklep powinien ją wywołać po zarejestrowaniu płatności przez klienta. Zwatermarkowany plik (pliki) zostaną przekopiowane do bucketu na amazon S3, który jest przypisany do sklepu. Sklep jest zobowiązany do wykasowania pliku po jego ściągnięciu.  <a href="classElibriWatermarkingClient.html#a71b2829ff44480bf0bcb368832cd903c">Więcej...</a><br /></td></tr>
<tr class="separator:a71b2829ff44480bf0bcb368832cd903c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9a6022fe6ac97609d6726248da806bb"><td class="memItemLeft" align="right" valign="top"><a id="af9a6022fe6ac97609d6726248da806bb"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classElibriWatermarkingClient.html#af9a6022fe6ac97609d6726248da806bb">available_files</a> ()</td></tr>
<tr class="memdesc:af9a6022fe6ac97609d6726248da806bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pobierz listę dostępnych plików Za pomocą tej metody możesz pobrać listę książek, które są lub będą w najbliższym czasie dostępne w systemie eLibri. <br /></td></tr>
<tr class="separator:af9a6022fe6ac97609d6726248da806bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30683d237fbf5ec5381871c83682d121"><td class="memItemLeft" align="right" valign="top"><a id="a30683d237fbf5ec5381871c83682d121"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classElibriWatermarkingClient.html#a30683d237fbf5ec5381871c83682d121">soon_available_files</a> ()</td></tr>
<tr class="memdesc:a30683d237fbf5ec5381871c83682d121"><td class="mdescLeft">&#160;</td><td class="mdescRight">Ponierz listę plików, których premiera się zbliża Za pomocą tej metody możesz pobrać listę ksiażek, które nie są w tej chwili dostępne, ale ich premiera jest wkrótce. <br /></td></tr>
<tr class="separator:a30683d237fbf5ec5381871c83682d121"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afafdf8a68bee4c40c4273abd68627d8b"><td class="memItemLeft" align="right" valign="top"><a id="afafdf8a68bee4c40c4273abd68627d8b"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classElibriWatermarkingClient.html#afafdf8a68bee4c40c4273abd68627d8b">soon_unavailable_files</a> ()</td></tr>
<tr class="memdesc:afafdf8a68bee4c40c4273abd68627d8b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Ponierz listę plików, które wkrótce przestaną być dostępne Za pomocą tej metody możesz pobrać listę ksiażek, które wkrótce przestaną być dostępne. <br /></td></tr>
<tr class="separator:afafdf8a68bee4c40c4273abd68627d8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Opis szczegółowy</h2>
<div class="textblock"><p>ElibriAPI abstrahuje wykorzystanie API udostępniane przez eLibri. </p>
</div><h2 class="groupheader">Dokumentacja konstruktora i destruktora</h2>
<a id="a8211ba714534e66679af4541b8c80ce3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8211ba714534e66679af4541b8c80ce3">&#9670;&nbsp;</a></span>__construct()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ElibriWatermarkingClient::__construct </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$token</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$secret</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$host</em> = <code>&quot;https://www.elibri.com.pl&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Kontruktor obiektu API. </p>
<dl class="params"><dt>Parametry</dt><dd>
  <table class="params">
    <tr><td class="paramtype">String</td><td class="paramname">$token</td><td>- publiczny token eLibri Watermarking API </td></tr>
    <tr><td class="paramtype">String</td><td class="paramname">$secret</td><td>- prywatny token eLibri Watermarking API </td></tr>
    <tr><td class="paramtype">Array</td><td class="paramname">$subdomains</td><td>- lista subdomen, opcjonalnie. Przydatne, gdy używana wersja PHP nie zawiera metody dns_get_record </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Dokumentacja funkcji składowych</h2>
<a id="a71b2829ff44480bf0bcb368832cd903c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a71b2829ff44480bf0bcb368832cd903c">&#9670;&nbsp;</a></span>deliver()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ElibriWatermarkingClient::deliver </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$trans_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Dostarcz plik oraz zajestruj transakcję Ta metoda powinna zostać wywołana po watermark. Sklep powinien ją wywołać po zarejestrowaniu płatności przez klienta. Zwatermarkowany plik (pliki) zostaną przekopiowane do bucketu na amazon S3, który jest przypisany do sklepu. Sklep jest zobowiązany do wykasowania pliku po jego ściągnięciu. </p>
<dl class="params"><dt>Parametry</dt><dd>
  <table class="params">
    <tr><td class="paramtype">String</td><td class="paramname">$trans_id</td><td>- alfanumeryczny identyfikator transakcji zwrócony przez metodę watermark </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0c799c9eb35b2e42598d01d46e06c638"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c799c9eb35b2e42598d01d46e06c638">&#9670;&nbsp;</a></span>watermark()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ElibriWatermarkingClient::watermark </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$ident</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$formats</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$visible_watermark</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$client_symbol</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Zlecaj watermarkowanie. Żeby skrócić maksymalnie oczekiwanie klienta na plik, podzieliliśmy cały proces watermarkingu na dwa etapy. Proponujemy, żeby zlecać watermarking tak wcześnie, jak to tylko możliwe (na przykład wtedy, gdy klient opuści koszyk, i poda swoje dane) elibri rozpoczyna wtedy watermarkowanie książki, ale nie udostępnia jeszcze pliku sklepowi, ani nie rejestruje transakcji. Dopiero po dokonaniu płatności przez klienta należy wywołać metodę deliver, która to asynchronicznie dostarczy linki do plik do sklepu. </p>
<dl class="params"><dt>Parametry</dt><dd>
  <table class="params">
    <tr><td class="paramtype">String</td><td class="paramname">$ident</td><td>- ISBN13 (bez myślików), lub record_reference </td></tr>
    <tr><td class="paramtype">String</td><td class="paramname">$formats</td><td>- 'mobi', 'epub', lub 'mobi,epub' </td></tr>
    <tr><td class="paramtype">String</td><td class="paramname">$visible_watermark</td><td>- stopka doklejana na końcu każdego rozdziału </td></tr>
    <tr><td class="paramtype">String</td><td class="paramname">$client_symbol</td><td>- opcjonalny identyfikator promocji </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Zwraca</dt><dd>$transid - alfanumeryczny identyfikator transakcji </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.8-->
<!-- start footer part -->
</div>
</div>
</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>
Wygenerowano przez &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.9.1
</small></address>
</body>
</html>
